<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Polygon Clipping</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for polyclip {polyclip}"><tr><td>polyclip {polyclip}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Polygon Clipping</h2>

<h3>Description</h3>

<p>Find intersection, union or set difference of two polygonal regions
or polygonal lines.
</p>


<h3>Usage</h3>

<pre>
 polyclip(A, B, op=c("intersection", "union", "minus", "xor"),
         ...,
         eps, x0, y0,
         fillA=c("evenodd", "nonzero", "positive", "negative"),
         fillB=c("evenodd", "nonzero", "positive", "negative"),
         closed = TRUE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>A,B</code></td>
<td>

<p>Data specifying polygons. See Details.
</p>
</td></tr>
<tr valign="top"><td><code>op</code></td>
<td>

<p>Set operation to be performed to combine <code>A</code> and <code>B</code>.
One of the character strings <code>"intersection"</code>,
<code>"union"</code>, <code>"minus"</code> or <code>"xor"</code> (partially matched).
</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
<tr valign="top"><td><code>eps</code></td>
<td>

<p>Spatial resolution for coordinates. A single positive
numeric value.
</p>
</td></tr>
<tr valign="top"><td><code>x0,y0</code></td>
<td>
<p>Spatial origin for coordinates. Numeric values.</p>
</td></tr>
<tr valign="top"><td><code>fillA,fillB</code></td>
<td>

<p>Polygon-filling rules for <code>A</code> and <code>B</code>.
Each argument is one of the character strings
<code>"evenodd"</code>, <code>"nonzero"</code>, <code>"positive"</code> or
<code>"negative"</code> (partially matched).
</p>
</td></tr>
<tr valign="top"><td><code>closed</code></td>
<td>

<p>Logical value specifying whether <code>A</code> is a
closed polygon (<code>closed=TRUE</code>, the default)
or an open polyline (<code>closed=FALSE</code>).
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is an interface to the polygon-clipping library
<code>Clipper</code> written by Angus Johnson.
</p>
<p>Given two polygonal regions <code>A</code> and <code>B</code>
the function <code>polyclip</code> performs one of the following
geometrical operations:
</p>

<ul>
<li> <p><code>op="intersection"</code>: set intersection of <code>A</code> and <code>B</code>.
</p>
</li>
<li> <p><code>op="union"</code>: set union of <code>A</code> and <code>B</code>.
</p>
</li>
<li> <p><code>op="minus"</code>: set subtraction (sometimes called set difference):
the region covered by <code>A</code> that is not covered by <code>B</code>.
</p>
</li>
<li> <p><code>op="xor"</code>: exclusive set difference (sometimes called
exclusive-or): the region covered by exactly one of the sets
<code>A</code> and <code>B</code>.
</p>
</li></ul>

<p>Each of the arguments <code>A</code> and <code>B</code> represents a region in the 
Euclidean plane bounded by closed polygons. The format of these
arguments is either
</p>

<ul>
<li>
<p>a list containing two components <code>x</code> and <code>y</code>
giving the coordinates of the vertices of a single polygon.
The last vertex should
not repeat the first vertex.
</p>
</li>
<li>
<p>a <code>list</code> of  <code>list(x,y)</code> structures giving
the coordinates of the vertices of several polygons.
</p>
</li></ul>

<p>Note that calculations are performed in integer arithmetic: see below.
</p>
<p>The interpretation of the polygons
depends on the <em>polygon-filling rule</em> for <code>A</code> and <code>B</code>
that is specified by the arguments <code>fillA</code> and <code>fillB</code>
respectively.
</p>

<dl>
<dt>Even-Odd:</dt><dd>
<p>The default rule is <em>even-odd</em> filling,
in which every polygon edge demarcates a boundary between
the inside and outside of the region. 
It does not matter whether a polygon is traversed in
clockwise or anticlockwise order. Holes are determined
simply by their locations relative to other polygons such that
outers contain holes and holes contain outers. 
</p>
</dd>
<dt>Non-Zero:</dt><dd>
<p>Under the <em>nonzero</em> filling rule, an outer boundary must be
traversed in clockwise order, while a hole must be traversed
in anticlockwise order.
</p>
</dd>
<dt>Positive:</dt><dd>
<p>Under the <code>positive</code> filling rule, the filled region
consists of all points with positive winding number.
</p>
</dd>
<dt>Negative:</dt><dd>
<p>Under the <code>negative</code> filling rule, the filled region
consists of all points with negative winding number.
</p>
</dd>
</dl>

<p><b>Calculations are performed in integer arithmetic</b>
after subtracting <code>x0,y0</code> from the coordinates,
dividing by <code>eps</code>, and rounding to the nearest integer.
Thus, <code>eps</code> is the effective spatial resolution.
The default values ensure reasonable accuracy.
</p>


<h3>Value</h3>

<p>Data specifying polygons, in the same format as <code>A</code> and <code>B</code>.
</p>


<h3>Author(s)</h3>

<p>Angus Johnson.
Ported to <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> by Adrian Baddeley
<a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.
Additional modification by Paul Murrell.
</p>


<h3>References</h3>

<p>Clipper Website: <a href="http://www.angusj.com">http://www.angusj.com</a>
</p>
<p>Vatti, B. (1992) A generic solution to polygon clipping.
<em>Communications of the ACM</em> <b>35</b> (7) 56&ndash;63.
<a href="http://portal.acm.org/citation.cfm?id=129906">http://portal.acm.org/citation.cfm?id=129906</a>
</p>
<p>Agoston, M.K. (2005)
<em>Computer graphics and geometric modeling:
implementation and algorithms.</em>
Springer-Verlag.
<a href="http://books.google.com/books?q=vatti+clipping+agoston">http://books.google.com/books?q=vatti+clipping+agoston</a>
</p>
<p>Chen, X. and McMains, S. (2005)
Polygon Offsetting by Computing Winding Numbers.
Paper no. DETC2005-85513 in <em>Proceedings of IDETC/CIE 2005</em>
(ASME 2005 International Design Engineering Technical Conferences
and Computers and Information in Engineering Conference),
pp. 565&ndash;575
<a href="http://www.me.berkeley.edu/~mcmains/pubs/DAC05OffsetPolygon.pdf">http://www.me.berkeley.edu/~mcmains/pubs/DAC05OffsetPolygon.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="polysimplify.html">polysimplify</a></code>,
<code><a href="polyoffset.html">polyoffset</a></code>,
<code><a href="polylineoffset.html">polylineoffset</a></code>,
<code><a href="polyminkowski.html">polyminkowski</a></code>
</p>


<h3>Examples</h3>

<pre>
  A &lt;- list(list(x=1:10, y=c(1:5,5:1)))
  B &lt;- list(list(x=c(2,8,8,2),y=c(0,0,10,10)))

  plot(c(0,10),c(0,10), type="n", axes=FALSE,
    xlab="", ylab="", main="intersection of closed polygons")
  invisible(lapply(A, polygon))
  invisible(lapply(B, polygon))
  C &lt;- polyclip(A, B)
  polygon(C[[1]], lwd=3, col=3)

  plot(c(0,10),c(0,10), type="n", axes=FALSE,
    xlab="", ylab="", main="intersection of open polyline and closed polygon")
  invisible(lapply(A, polygon))
  invisible(lapply(B, polygon))
  E &lt;- polyclip(A, B, closed=FALSE)
  invisible(lapply(E, lines, col="purple", lwd=5))
</pre>

<hr /><div style="text-align: center;">[Package <em>polyclip</em> version 1.10-0 <a href="00Index.html">Index</a>]</div>
</body></html>
