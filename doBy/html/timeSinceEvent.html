<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Calculate &quot;time since event&quot; in a vector.</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for timeSinceEvent {doBy}"><tr><td>timeSinceEvent {doBy}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Calculate &quot;time since event&quot; in a vector.</h2>

<h3>Description</h3>

<p>Calculate &quot;time since event&quot; in a vector.
</p>


<h3>Usage</h3>

<pre>
timeSinceEvent(yvar, tvar = seq_along(yvar))
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>yvar</code></td>
<td>
<p>A numerical or logical vector specifying the events</p>
</td></tr>
<tr valign="top"><td><code>tvar</code></td>
<td>
<p>An optional vector specifying time</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Events are coded as 1 in numeric vector (and non-events are
coded with values different from 1). <code>timeSinceEvent</code> will give the
time since event (with and without sign). In a logical vector, events are
coded as TRUE and all non-events as FALSE.
</p>


<h3>Value</h3>

<p>A dataframe with columns 'yvar', 'tvar', 'abs.tse' (absolute time
since nearest event), 'sign.tse' (signed time since nearest event) and
'run' (indicator of the time window around each event).
</p>


<h3>Note</h3>

<p>NA's in yvar are converted to zeros.
</p>


<h3>Author(s)</h3>

<p>Søren Højsgaard, <a href="mailto:sorenh@math.aau.dk">sorenh@math.aau.dk</a>
</p>


<h3>See Also</h3>

<p><code><a href="sub_seq.html">subSeq</a></code>, <code><a href="../../base/html/rle.html">rle</a></code>
</p>


<h3>Examples</h3>

<pre>

## Events:
yvar &lt;- c(0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0,
          0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)

## Plot results:
tse&lt;- timeSinceEvent(yvar)
plot(sign.tse~tvar, data=tse, type="b")
grid()
rug(tse$tvar[tse$yvar==1], col=4, lwd=4)
points(scale(tse$run), col=tse$run, lwd=2)
lines(abs.tse + .2 ~ tvar, data=tse, type="b", col=3)

## Find times for which time since an event is at most 1:
tse$tvar[tse$abs&lt;=1]

yvar &lt;- c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
)
tvar &lt;- c(207, 208, 208, 208, 209, 209, 209, 209, 210, 210, 211, 211, 
211, 212, 213, 213, 214, 214, 215, 216, 216, 216, 216, 217, 217, 
217, 218, 218, 219, 219, 219, 219, 220, 220, 221, 221, 221, 221, 
222, 222, 222)

timeSinceEvent(yvar, tvar)



</pre>

<hr /><div style="text-align: center;">[Package <em>doBy</em> version 4.6.8 <a href="00Index.html">Index</a>]</div>
</body></html>
