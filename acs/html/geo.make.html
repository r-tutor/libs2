<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Create a new geo.set object for use with the acs package.</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for geo.make {acs}"><tr><td>geo.make {acs}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>
Create a new geo.set object for use with the acs package.
</h2>

<h3>Description</h3>

<p> The <code>geo.make</code> function is used to create new
user-specified geographies for use with the <code>acs.fetch</code> function of
the acs package.  At the most basic level, a user specifies some
combination of existing census levels (state, county, county
subdivision, place, tract, block group, msa, csa, puma, and more &ndash; see
arguments), and the function returns a new geo.set object holding this
information.
</p>
<p>When specifying state, county, county subdivision, place, american
indian area, and/or any of the state school district arguments,
<code>geo.make</code> will accept either FIPS codes or common geographic
names, and will try to match on partial strings; there is also limited
support for regular expressions, but by default the searches are case
sensitive and matches are expected at the start of names. (For example,
<code>geo.make(state="WA", county="Kits")</code> should find Kitsap County,
and the more adventurous <code>yakima=geo.make(state="Washi",
county=".*kima")</code> should work to create the a geo.set for Yakima
county.)
</p>
<p>Other geographies (including tract, block.group, csa, msa, region,
division, urban.area, necta, puma, zip.code. and/or
congressional.district) can only be specified by FIPS codes (or &quot;*&quot; for
all).
</p>
<p>Tracts should be specified as six digit numbers, although initial zeroes
may be removed; note that trailing zeroes are often removed in common
usage, so a tract that may be referred to as &quot;tract 243&quot; is technically
FIPS code 24300; likewise &quot;tract 3872.01&quot; is FIPS code 387201 for the
purposes of geo.make.
</p>


<h3>Usage</h3>

<pre>
geo.make(us, region, division, state, county, county.subdivision,
  place, tract, block.group, msa, csa, necta, urban.area,
  congressional.district, state.legislative.district.upper,
  state.legislative.district.lower, puma, zip.code,
  american.indian.area, school.district.elementary,
  school.district.secondary, school.district.unified,
  combine = F, combine.term = "aggregate", check = FALSE, key = "auto")
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>us</code></td>
<td>
<p>either the number 1, the character &quot;*&quot;, or TRUE, indicating
whether the geo.set should contain data for the entire U.S.; if
selected, no other geography options may be specified; setting us
corresponds to using census summary level 010.</p>
</td></tr>
<tr valign="top"><td><code>region</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding
to the desired FIPS region (e.g., region=1 for Census Northeast
Region); if selected, no other geography options may be specified;
setting region corresponds to using census summary level 020.</p>
</td></tr>
<tr valign="top"><td><code>division</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding
to the desired FIPS division (e.g., division=4 for Census West North
Central Division); if selected, no other geography options may be
specified; setting division corresponds to using census summary
level 030.</p>
</td></tr>
<tr valign="top"><td><code>american.indian.area</code></td>
<td>
<p>either the numeric code (or wildcard &quot;*&quot;
for all) corresponding to the desired FIPS American Indian
Area/Alaska Native Area/Hawaiian Home Land, or a character string to
match in the names of these Census areas; if selected, no other
geography options may be specified; setting american.indian.area
corresponds to using census summary level 250.</p>
</td></tr>
<tr valign="top"><td><code>state</code></td>
<td>
<p>either the two-digit numeric FIPS code for the state, the
two-letter postal abbreviation, or a character string to match in
the state name (or wildcard &quot;*&quot; for all); setting state without
other options corresponds to using census summary level 040, but it
may be used in conjunction with other summary levels below.</p>
</td></tr>
<tr valign="top"><td><code>county</code></td>
<td>
<p>either the numeric FIPS code (or wildcard &quot;*&quot; for all)
for the county or a character string to match in the county name;
setting state and county without other options corresponds to using
census summary level 050, but they may be used in conjunction with
other summary levels below.</p>
</td></tr>
<tr valign="top"><td><code>county.subdivision</code></td>
<td>
<p>either the numeric FIPS code (or wildcard
&quot;*&quot; for all) for the county subdivision or a character string to
match in the county subdivision name; setting state, county, and
county.subdivision without other options corresponds to using census
summary level 060.</p>
</td></tr>
<tr valign="top"><td><code>place</code></td>
<td>
<p>either the numeric FIPS code (or wildcard &quot;*&quot; for all)
for the place or a character string to match in the place name;
setting state and place without other options corresponds to using
census summary level 160.</p>
</td></tr>
<tr valign="top"><td><code>tract</code></td>
<td>
<p>a six digit numeric FIPS code (or wildcard &quot;*&quot; for all)
for the census tract, including trailing zeroes; remove decimal
points; leading zeroes may be omitted; see description; tract may be
used with state and county to create geo.sets for census summary
levels 140, and with state, county, and block.group for summary
level 150.</p>
</td></tr>
<tr valign="top"><td><code>block.group</code></td>
<td>
<p>the numeric FIPS code (or wildcard &quot;*&quot; for all) for
the block.group; block.group may be used with state, county, and
tract to create geo.sets for census summary levels 150.</p>
</td></tr>
<tr valign="top"><td><code>msa</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding to
the desired FIPS metropolitan statistical area/micropolitan
statistical area (e.g., msa=10100 for Aberdeen, SD micropolitan
statistical area); setting msa without other options corresponds to
using census summary level 310, but it may be used in conjunction
with state for summary level 320.</p>
</td></tr>
<tr valign="top"><td><code>csa</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding to
the desired FIPS combined statistical area (e.g., csa=104 for Census
Albany-Schenectady-Amsterdam, NY CSA); setting csa without other
options corresponds to using census summary level 330, but it may be
used in conjunction with state for summary level 340.</p>
</td></tr>
<tr valign="top"><td><code>necta</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding to
the desired FIPS New England City and Town Area (e.g., necta=77650
for Rutland, VT Micropolitan NECTA); if selected, no other
geography options may be specified; setting necta corresponds to
using census summary level 350.</p>
</td></tr>
<tr valign="top"><td><code>urban.area</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all)
corresponding to the desired FIPS urban area (e.g., urban.area=3169
for Aromas, CA Urban Cluster); if selected, no other
geography options may be specified; setting urban.area corresponds
to using census summary level 400.</p>
</td></tr>
<tr valign="top"><td><code>congressional.district</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all)
corresponding to the desired FIPS congressional district (e.g.,
state=&quot;ME&quot; and congressional.district=1 for Maine's first
congressional district); setting state and congressional.district
without other options corresponds to using census summary level 500,
but they may be used in conjunction with county for summary level
510.</p>
</td></tr>
<tr valign="top"><td><code>state.legislative.district.upper</code></td>
<td>
<p>a numeric or character code
(or wildcard &quot;*&quot; for all) corresponding to the desired FIPS state
legislative district (upper chamber); these codes vary from state to
state, and are sometimes numbers (1, 2, 3, etc. in Massachusetts)
and sometimes letters (&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, etc. in Alaska); setting state
and state.legislative.district.upper without other options
corresponds to using census summary level 610.</p>
</td></tr>
<tr valign="top"><td><code>state.legislative.district.lower</code></td>
<td>
<p>a numeric or character code
(or wildcard &quot;*&quot; for all) corresponding to the desired FIPS state
legislative district (lower chamber); these codes vary from state to
state, and are sometimes numbers (1, 2, 3, etc. in Massachusetts)
and sometimes letters (&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, etc. in Alaska); setting state
and state.legislative.district.lower without other options
corresponds to using census summary level 620.</p>
</td></tr>
<tr valign="top"><td><code>puma</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding to
the desired FIPS public use microdata area (e.g., state=10 and
puma=103 for PUMA 103 in Delaware); setting state and puma
without other options corresponds to using census summary level
795.</p>
</td></tr>
<tr valign="top"><td><code>zip.code</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding
to the desired zip code tabulation area (e.g., zip.code=91303 for
zip code 91303); if selected, no other geography options may be
specified; setting zip.code corresponds to using census summary
level 860.</p>
</td></tr>
<tr valign="top"><td><code>school.district.elementary</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for
all) corresponding to the desired FIPS state school district
(elementary), or a character string to search for in the names of
these districts; setting state and school.district.elementary
without other options corresponds to using census summary level
950.</p>
</td></tr>
<tr valign="top"><td><code>school.district.secondary</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for
all) corresponding to the desired FIPS state school district
(secondary), or a character string to search for in the names of
these districts; setting state and school.district.secondary
without other options corresponds to using census summary level
960.</p>
</td></tr>
<tr valign="top"><td><code>school.district.unified</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for
all) corresponding to the desired FIPS state school district
(unified), or a character string to search for in the names of these
districts; setting state and school.district.unified without other
options corresponds to using census summary level 970.</p>
</td></tr>
<tr valign="top"><td><code>combine</code></td>
<td>
<p>a logical flag to indicate whether the component
geographies of the geo.set are to be combined when data is
downloaded; see details.</p>
</td></tr>
<tr valign="top"><td><code>combine.term</code></td>
<td>
<p>a character string to provide a label for
aggregate geography, if data is combined</p>
</td></tr>
<tr valign="top"><td><code>check</code></td>
<td>
<p>logical flag indicating whether to run a check for valid
geographies with Census API; defaults to FALSE; when TRUE, a current
API key must be provided or installed</p>
</td></tr>
<tr valign="top"><td><code>key</code></td>
<td>
<p>when check=T and no API key has been previously installed
through <code>api.key.install</code>, a string key may be provided here</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In addition to creating individual combinations of census
geographies, users can pass vector arguments (with recycling) to
geo.make to create sets of geographies.  Important: each set of
arguments must match with exactly one known Census geography: if, for
example, the names of two places (or counties, or whatever) would both
match, the <code>geo.make</code> function will return an error. (To the
development team, this seemed preferable to simply including both
matches, since all sorts of place names might match a string, and it
is doubtful a user really wants them all.)  The one exception to this
&quot;single match&quot; rule is that for the smallest level of geography
specified, a user can enter &quot;*&quot; to indicate that all geographies at
that level should be selected.
</p>
<p>When creating new geographies, note, too, that not all combinations
are valid.  In particular the package attempts to follow paths through
the Census summary levels (such as summary level 140:
&quot;state-county-tract&quot; or summary level 160: &quot;state-place&quot;).  So when
specifying, for example, state, county, and place, the county will be
ignored.
</p>
<p>Note: when a geo.set with &quot;combine=T&quot; is passed to <code>acs.fetch</code>,
downloaded data will be aggregated in the resulting acs abject.  Some
users may therefore wish to specify &quot;one.zero=T&quot; as an additional
argument to <code>acs.fetch</code>; see <code><a href="sum-methods.html">sum-methods</a></code>.  
</p>
<p>The following table may be helpful in figuring out which options to set
for which Census summary levels.  For more information on which datasets
and endyear/span combinations are available for each summary level, see
<a href="http://www.census.gov/data/developers/data-sets.html">http://www.census.gov/data/developers/data-sets.html</a> (click each
dataset and search for &quot;Examples and Supported Geography&quot;).
</p>

<table summary="Rd table">
<tr>
 <td style="text-align: center;">
  SUMMARY LEVEL </td><td style="text-align: left;"> ARGUMENTS REQUIRED </td>
</tr>
<tr>
 <td style="text-align: center;">
  010  </td><td style="text-align: left;"> us </td>
</tr>
<tr>
 <td style="text-align: center;">
  020  </td><td style="text-align: left;"> region   </td>
</tr>
<tr>
 <td style="text-align: center;">
  030 </td><td style="text-align: left;">  division </td>
</tr>
<tr>
 <td style="text-align: center;">
  040 </td><td style="text-align: left;">  state </td>
</tr>
<tr>
 <td style="text-align: center;">
  050  </td><td style="text-align: left;"> state, county </td>
</tr>
<tr>
 <td style="text-align: center;">
  060 </td><td style="text-align: left;"> state, county, county.subdivision </td>
</tr>
<tr>
 <td style="text-align: center;">
  140  </td><td style="text-align: left;"> state, county, tract </td>
</tr>
<tr>
 <td style="text-align: center;">
  150  </td><td style="text-align: left;"> state, county, tract, block.group  </td>
</tr>
<tr>
 <td style="text-align: center;">
  160 </td><td style="text-align: left;">  state, place </td>
</tr>
<tr>
 <td style="text-align: center;">
  250 </td><td style="text-align: left;"> american.indian.area </td>
</tr>
<tr>
 <td style="text-align: center;">
  310 </td><td style="text-align: left;"> msa </td>
</tr>
<tr>
 <td style="text-align: center;">
  320 </td><td style="text-align: left;"> state, msa  </td>
</tr>
<tr>
 <td style="text-align: center;">
  330 </td><td style="text-align: left;"> csa </td>
</tr>
<tr>
 <td style="text-align: center;">
  340 </td><td style="text-align: left;"> state, csa  </td>
</tr>
<tr>
 <td style="text-align: center;">
  350  </td><td style="text-align: left;"> necta   </td>
</tr>
<tr>
 <td style="text-align: center;">
  400  </td><td style="text-align: left;"> urban.area  </td>
</tr>
<tr>
 <td style="text-align: center;">
  500  </td><td style="text-align: left;"> state, congressional.district </td>
</tr>
<tr>
 <td style="text-align: center;">
  510    </td><td style="text-align: left;"> state, congressional.district, county  </td>
</tr>
<tr>
 <td style="text-align: center;">
  610    </td><td style="text-align: left;"> state, state.legislative.district.upper  </td>
</tr>
<tr>
 <td style="text-align: center;">
  620    </td><td style="text-align: left;"> state, state.legislative.district.lower  </td>
</tr>
<tr>
 <td style="text-align: center;">
  795    </td><td style="text-align: left;"> state, puma  </td>
</tr>
<tr>
 <td style="text-align: center;">
  860  </td><td style="text-align: left;"> zip.code  </td>
</tr>
<tr>
 <td style="text-align: center;">
  950  </td><td style="text-align: left;"> state, school.district.elementary  </td>
</tr>
<tr>
 <td style="text-align: center;">
  960  </td><td style="text-align: left;"> state, school.district.secondary  </td>
</tr>
<tr>
 <td style="text-align: center;">
  970  </td><td style="text-align: left;"> state, school.district.unified  </td>
</tr>
<tr>
 <td style="text-align: center;">
</td>
</tr>

</table>

<p>All other arguments/combinations will either be ignored or result in a
failure.  </p>


<h3>Value</h3>

<p> Returns a geo.set class object.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>


<ol>
<li><p>&quot;acs.R: An R Package for Neighborhood-Level Data from the
U.S. Census.&quot; Ezra Haber Glenn, Department of Urban Studies and
Planning, Massachusetts Institute of Technology.  Presented at the
Computers in Urban Planning and Urban Management Conference, July
6, 2011.
<a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2171390">http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2171390</a>.
</p>
</li>
<li><p>Census API Supported Geography:
<a href="http://www.census.gov/data/developers/data-sets.html">http://www.census.gov/data/developers/data-sets.html</a></p>
</li></ol>


<h3>See Also</h3>

<p><code><a href="geo.set-class.html">geo.set-class</a></code>
</p>


<h3>Examples</h3>

<pre>

# some single-state geo.sets
washington=geo.make(state=53)
alabama=geo.make(state="Alab")

# a county match
yakima=geo.make(state="WA", county="Yakima")
yakima

# a multiple-county geo.set
psrc=geo.make(state="WA", county=c(33,35,53,61))
psrc

# combine geo.sets
north.mercer.island=geo.make(state=53, county=33, tract=c(24300,24400))
optional.tract=geo.make(state=53, county=33, tract=24500)
# add in one more tract to create new, larger geo
north.mercer.island.plus=north.mercer.island + optional.tract

# using wildcards

# all unified school districts in Kansas
geo.make(state="KS", school.district.unified="*")

# all state house districts in Alaska
geo.make(state="AK", state.legislative.district.lower="*")

# all tracts in Kings County, NY
geo.make(state="NY", county="King", tract="*")

</pre>

<hr /><div style="text-align: center;">[Package <em>acs</em> version 2.1.3 <a href="00Index.html">Index</a>]</div>
</body></html>
