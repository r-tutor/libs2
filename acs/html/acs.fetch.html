<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Downloads demographic data (ACS, SF1, SF3) via the Census API...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for acs.fetch {acs}"><tr><td>acs.fetch {acs}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2> Downloads demographic data (ACS, SF1, SF3) via the Census API
and converts to a proper acs object with estimates, standard errors, and
associated metadata.</h2>

<h3>Description</h3>

<p> When passed a valid geo.set object and either lookup terms
(table.number, table.name, keyword) or a valid acs.lookup object,
queries the Census API and downloads data to create a new acs-class
object.  Geographical information is preserved, metadata in bundled
together with the acs object, and margins of errors are converted to
standard errors to accompany estimates (see <code>help(acs)</code>).</p>


<h3>Usage</h3>

<pre>
acs.fetch(endyear, span = 5, geography, table.name,
      table.number, variable, keyword, dataset = "acs",
      key, col.names = "auto", ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>endyear</code></td>
<td>
<p>an integer indicating the latest year of the data in the
survey (e.g., for data from the 2007-2011 5-year ACS data, endyear would
be 2011)</p>
</td></tr>
<tr valign="top"><td><code>span</code></td>
<td>
<p>an integer indicating the span (in years) of the desired ACS
data (should be 1, 3, or 5 for ACS datasets, and 0 for decennial
census SF1 and SF3 datasets); defaults to 5, but ignored and reset
to 0 if dataset=&quot;sf1&quot; or &quot;sf3&quot;.</p>
</td></tr>
<tr valign="top"><td><code>geography</code></td>
<td>
<p>a valid geo.set object specifying the census
geography or geographies to be fetched; can be created &quot;on the fly&quot;
with a call to <code>geo.make()</code> </p>
</td></tr>
<tr valign="top"><td><code>table.name</code></td>
<td>
<p>a string giving the search term(s) to find in the
name of the ACS census table (for example, &quot;Sex&quot; or &quot;Age&quot;); accepts
multiple words, which must all be found in the returned table names;
always case-sensitive.  (Note: when set, this variable is passed to
an internal call to acs.lookup&mdash;see
<code><a href="acs.lookup.html">acs.lookup</a></code>).</p>
</td></tr>
<tr valign="top"><td><code>table.number</code></td>
<td>
<p>a string (not a number) indicating the table from
the Census to fetch; examples: &quot;B01003&quot; or &quot;B23013&quot;; always
case-sensitive. Used to fetch all variables for a given table
number; if &quot;table.number&quot; is provided, other lookup variables
(&quot;table.name&quot; or &quot;keyword&quot;) will be ignored.</p>
</td></tr>
<tr valign="top"><td><code>variable</code></td>
<td>
<p>an object of acs.lookup class, or a string (not a
number) or vector of strings indicating the exact variable
number(s) the Census to fetch.  See details for more.
Non-acs.lookup examples include &quot;B01003_001&quot; or &quot;B23013_003&quot; or
c(&quot;B01003_001&quot;, &quot;B23013_003&quot;).  Used to fetch specific variables,
as opposed to all variables for a given table number; if
&quot;variable&quot; is provided, all other lookup variables (&quot;table.name&quot;,
&quot;table.number&quot;, and &quot;keyword&quot;) will be ignored. </p>
</td></tr>
<tr valign="top"><td><code>keyword</code></td>
<td>
<p>a string or vector of strings giving the search
term(s) to find in the name of the census variable (for example,
&quot;Male&quot; or &quot;Haiti&quot;); accepts multiple words, which must all be
found in the returned variable names; always case-sensitive.
(Note: when set, this variable is passed to an internal call to
acs.lookup&mdash;see <code><a href="acs.lookup.html">acs.lookup</a></code>).</p>
</td></tr>
<tr valign="top"><td><code>dataset</code></td>
<td>
<p>either &quot;acs&quot; (the default), &quot;sf1&quot;, or &quot;sf3&quot;, indicating
whether to fetch data from in the American Community Survey or the
SF1/SF3 datasets.  See details for more information about available
data.</p>
</td></tr>
<tr valign="top"><td><code>key</code></td>
<td>
<p>a string providing the Census API key to use for when
fetching data.  Typically saved once via <code>api.key.install</code>
and passed automatically with each call; see
<code><a href="api.key.install.html">api.key.install</a></code></p>
</td></tr>
<tr valign="top"><td><code>col.names</code></td>
<td>
<p>either &quot;auto&quot;,&quot;pretty&quot;, or a vector of strings of
the same length as the number of variables to be fetched.  When
&quot;auto&quot; (the default), census variable codes will be used as column
names for the fetched data; when &quot;pretty&quot;, descriptive variables
names will be used; otherwise col.names will be used.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p> Not used interactively (reserved for recursive calls).
</p>
</td></tr></table>


<h3>Details</h3>

<p>Assuming you have created some geography with geo.make and you have
already installed an API key, the call is quite simple: for example,
<code>acs.fetch(endyear=2014, geography=my.geo, table.number="B01003")</code>.
(For more on API keys, see <code><a href="api.key.install.html">api.key.install</a></code>; if you haven't
installed one, you can always add a &quot;key=YOUR.KEY.HERE&quot; argument to
<code>acs.fetch</code> each time.)
</p>
<p>By default, acs.fetch will download 5-year ACS, but as of version 2.0
users must specify a specific &quot;endyear&quot;.  Users may also select 1- or
3-year ACS data using the &quot;span=&quot; option, as well as Decennial data
using the &quot;dataset&quot; option.  (When dataset=&quot;sf1&quot; or &quot;sf3&quot;, span will be
reset to 0 regardless of any explict or default options.)  At present,
the API provides five-, three- and one-year data for a variety of
different endyears, and Decennial data for 2010, 2000, and 1990; see the
chart below and/or visit
<a href="http://www.census.gov/data/developers/data-sets.html">http://www.census.gov/data/developers/data-sets.html</a> to learn more
about what is available through the API.  (Warning: support for 1990 is
a bit unreliable as of the date of this version, due to non-standard
variable lookup tables.)
</p>
 <ul>
<li><p>American Community Survey 5-Year Data (dataset=&quot;acs&quot;,
span=5): 2005-2009 through 2010-2014
</p>
</li>
<li><p>American Community Survey 3 Year Data (dataset=&quot;acs&quot;, span=3):
2013, 2012
</p>
</li>
<li><p>American Community Survey 1 Year Data (dataset=&quot;acs&quot;, span=1):
2014, 2013, 2012, 2011
</p>
</li>
<li><p>SF1/Short-Form (dataset=&quot;sf1&quot;): 1990, 2000, 2010
</p>
</li>
<li><p>SF3/Long-Form (dataset=&quot;sf3&quot;): 1990, 2000
</p>
</li></ul>

<p>Downloading based on a table number is probably the most fool-proof way
to get the data you want, but acs.fetch will also accept a number of
other arguments instead of &quot;table.number&quot;.  Users can provide strings to
search for in table names (e.g., table.name=&quot;Age by Sex&quot; or
table.name=&quot;First Ancestry Reported&quot;) or keywords to find in the names
of variables (e.g., keyword=&quot;Male&quot; or keyword=&quot;Haiti&quot;)&mdash;but be warned:
given how many tables there are, you may get more matches than you
expected and suffer from the &quot;download overload&quot; of fast-scrolling
screens full of data. (But don't lose hope: see the
<code><a href="acs.lookup.html">acs.lookup</a></code> tool, which can help with this problem.)
</p>
<p>On the other hand, if you know you want a specific variable or two (not
a whole table, just a few columns of it, such as variable=&quot;B05001_006&quot;
or variable=c(&quot;B16001_058&quot;, &quot;B16001_059&quot;)), you can ask for that with
<code>acs.fetch(variable="these.variable.codes", ...)</code>.
</p>
<p>Note: when &quot;combine=T&quot; for the fetched geo.set, data will be aggregated
in the resulting acs abject.  Some users may therefore wish to specify
&quot;one.zero=T&quot; as an additional argument to <code>acs.fetch</code>; see
<code><a href="sum-methods.html">sum-methods</a></code>. </p>


<h3>Value</h3>

<p>Returns a new acs-class object with estimates, standard errors
(derived from the census 90% margins of error), and metadata of the
fetched data from the Census API.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>


<ol>
<li><p><a href="http://www.census.gov/developers/">http://www.census.gov/developers/</a>
</p>
</li>
<li><p><a href="http://www.census.gov/data/developers/data-sets.html">http://www.census.gov/data/developers/data-sets.html</a>
</p>
</li></ol>


<h3>See Also</h3>

<p><code><a href="acs.lookup.html">acs.lookup</a></code>.
</p>

<hr /><div style="text-align: center;">[Package <em>acs</em> version 2.1.3 <a href="00Index.html">Index</a>]</div>
</body></html>
