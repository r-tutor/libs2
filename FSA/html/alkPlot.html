<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Plots to visualize age-length keys.</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for alkPlot {FSA}"><tr><td>alkPlot {FSA}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Plots to visualize age-length keys.</h2>

<h3>Description</h3>

<p>Various plots to visualize the proportion of fish of certain ages within length intervals in an age-length key.
</p>


<h3>Usage</h3>

<pre>
alkPlot(key, type = c("barplot", "area", "lines", "splines", "bubble"),
  xlab = "Length", ylab = ifelse(type != "bubble", "Proportion",
  "Age"), xlim = NULL, ylim = NULL, showLegend = FALSE,
  lbl.cex = 1.25, leg.cex = 1, lwd = 2, span = 0.25,
  pal = paletteChoices(), grid = TRUE, col = "gray80", buf = 0.45,
  add = FALSE, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>key</code></td>
<td>
<p>A numeric matrix that contains the age-length key.</p>
</td></tr>
<tr valign="top"><td><code>type</code></td>
<td>
<p>A string that indicates the type of plot to construct.  See details.</p>
</td></tr>
<tr valign="top"><td><code>xlab, ylab</code></td>
<td>
<p>A string that contains the label for the x- or y-axis.</p>
</td></tr>
<tr valign="top"><td><code>xlim, ylim</code></td>
<td>
<p>A numeric of length 2 that provide the limits for the x-axis or y-axis.</p>
</td></tr>
<tr valign="top"><td><code>showLegend</code></td>
<td>
<p>A logical that indicates whether a legend should be displayed (not implemented for <code>type="bubble"</code>).  See examples.</p>
</td></tr>
<tr valign="top"><td><code>lbl.cex</code></td>
<td>
<p>A numeric character expansion value for labels inside the bars when <code>type="barplot"</code> or on the lines when <code>type="lines"</code> or <code>type="splines"</code>.  Only used if <code>showLegend=FALSE</code>.</p>
</td></tr>
<tr valign="top"><td><code>leg.cex</code></td>
<td>
<p>A numeric character expansion value for labels on the legend when <code>showLegend=TRUE</code>.</p>
</td></tr>
<tr valign="top"><td><code>lwd</code></td>
<td>
<p>A numeric that indicates the line width when <code>type="lines"</code> or <code>type="splines"</code>.</p>
</td></tr>
<tr valign="top"><td><code>span</code></td>
<td>
<p>A numeric that indicates the span value to use in <code>loess</code> when <code>type="splines"</code>.</p>
</td></tr>
<tr valign="top"><td><code>pal</code></td>
<td>
<p>A string that indicates the palette to generate colors for the bars, areas, lines, or spline lines.  The name of a palette must be one of &ldquo;rich&rdquo;, &ldquo;cm&rdquo;, &ldquo;default&rdquo;, &ldquo;grey&rdquo;, &ldquo;gray&rdquo;, &ldquo;heat&rdquo;, &ldquo;jet&rdquo;, &ldquo;rainbow&rdquo;, &ldquo;topo&rdquo;, or &ldquo;terrain&rdquo;.  See <code><a href="chooseColors.html">chooseColors</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>grid</code></td>
<td>
<p>A logical that indicates whether a grid should be placed under the bubbles when <code>type="bubble"</code> or a character or appropriate vector that identifies a color for the grid.  See examples.</p>
</td></tr>
<tr valign="top"><td><code>col</code></td>
<td>
<p>A string that indicates the color of the bubbles when <code>type="bubble"</code>.</p>
</td></tr>
<tr valign="top"><td><code>buf</code></td>
<td>
<p>A single numeric that indicates the relative width of the bubbles when <code>type="bubble"</code>.  A value of 0.5 means that two full-width bubbles would touch each other either in the x- or y-direction (i.e., this would represent half of the minimum of the physical distance between values one-unit apart on the x- and y-axes).  Set this to a value less than 0.5 so that the bubbles will not touch (the default is 0.45).</p>
</td></tr>
<tr valign="top"><td><code>add</code></td>
<td>
<p>A logical that indicates whether the data should be added to an already existing plot.  May be useful for visually comparing age-length keys.  Only implemented when <code>type="bubble"</code>.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Additional arguments to pass to <code>plot</code> or <code>barplot</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A variety of plots can be used to visualize the proportion of fish of certain ages within length intervals of an age-length key.  The types of plots are described below and illustrated in the examples.
</p>

<ul>
<li><p> A &ldquo;stacked&rdquo; bar chart where vertical bars over length intervals sum to 1 but are segmented by the proportion of each age in that length interval is constructed with <code>type="barplot"</code>.  The ages will be labeled in the bar segments unless <code>showLegend=TRUE</code> is used.
</p>
</li>
<li><p> A &ldquo;stacked&rdquo; area chart similar to the bar chart described above is constructed with <code>type="area"</code>.
</p>
</li>
<li><p> A plot with (differently colored) lines that connect the proportions of ages within each length interval is constructed with <code>type="lines"</code>.
</p>
</li>
<li><p> A plot with (differently colored) lines, as estimated by loess splines, that connect the proportions of ages within each length interval is constructed with <code>type="splines"</code>.
</p>
</li>
<li><p> A &ldquo;bubble&rdquo; plot where circles whose size is proportional to the proportion of fish of each age in each length interval is constructed with <code>type="bubble"</code>.  The color of the bubbles can be controlled with <code>col=</code> and an underlying grid for ease of seeing the age and length interval for each bubble can be controlled with <code>grid=</code>.  Bubbles from a second age-length key can be overlaid on an already constructed bubble plot by using <code>add=TRUE</code> in a second call to <code>alkPlot</code>.
</p>
</li></ul>

<p>Note that all plots are &ldquo;vertically conditional&rdquo; &ndash; i.e., each represents the proportional ages WITHIN each length interval.
</p>


<h3>Value</h3>

<p>None, but a plot is constructed.
</p>


<h3>IFAR Chapter</h3>

<p>5-Age-Length Key.
</p>


<h3>Author(s)</h3>

<p>Derek H. Ogle, <a href="mailto:derek@derekogle.com">derek@derekogle.com</a>
</p>


<h3>References</h3>

<p>Ogle, D.H.  2016.  <a href="http://derekogle.com/IFAR">Introductory Fisheries Analyses with R</a>.  Chapman &amp; Hall/CRC, Boca Raton, FL.
</p>


<h3>See Also</h3>

<p>See <code><a href="alkIndivAge.html">alkIndivAge</a></code> for using an age-length key to assign ages to individual fish.
</p>


<h3>Examples</h3>

<pre>
## Make an example age-length key
WR.age &lt;- subset(WR79, !is.na(age))
WR.age$LCat &lt;- lencat(WR.age$len,w=5)
raw &lt;- xtabs(~LCat+age,data=WR.age)
( WR.key &lt;- prop.table(raw, margin=1) )

## Various visualizations of the age-length key
alkPlot(WR.key,"barplot")
alkPlot(WR.key,"barplot",pal="gray")
alkPlot(WR.key,"barplot",showLegend=TRUE)
alkPlot(WR.key,"area")
alkPlot(WR.key,"area",showLegend=TRUE)
alkPlot(WR.key,"area",pal="gray")
alkPlot(WR.key,"lines")
alkPlot(WR.key,"lines",pal="gray")
alkPlot(WR.key,"lines",showLegend=TRUE)
alkPlot(WR.key,"splines")
alkPlot(WR.key,"splines",span=0.2)
alkPlot(WR.key,"splines",pal="gray",showLegend=TRUE)
alkPlot(WR.key,"bubble")
alkPlot(WR.key,"bubble",grid=FALSE)
alkPlot(WR.key,"bubble",grid="blue")
alkPlot(WR.key,"bubble",grid=rgb(0,0,0,0.2),col=rgb(0,0,0,0.5))

</pre>

<hr /><div style="text-align: center;">[Package <em>FSA</em> version 0.8.24 <a href="00Index.html">Index</a>]</div>
</body></html>
