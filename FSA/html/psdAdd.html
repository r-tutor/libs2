<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Creates a vector of Gabelhouse lengths for each species in an...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for psdAdd {FSA}"><tr><td>psdAdd {FSA}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Creates a vector of Gabelhouse lengths for each species in an entire data frame.</h2>

<h3>Description</h3>

<p>Creates a vector of the Gabelhouse lengths specific to a species for all individuals in an entire data frame.
</p>


<h3>Usage</h3>

<pre>
psdAdd(len, ...)

## Default S3 method:
psdAdd(len, spec, units = c("mm", "cm", "in"),
  use.names = TRUE, addSpec = NULL, addLens = NULL, verbose = TRUE,
  ...)

## S3 method for class 'formula'
psdAdd(len, data = NULL, units = c("mm", "cm", "in"),
  use.names = TRUE, addSpec = NULL, addLens = NULL, verbose = TRUE,
  ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>len</code></td>
<td>
<p>A numeric vector that contains lengths measurements or a formula of the form <code>len~spec</code> where &ldquo;len&rdquo; generically represents the length variable and &ldquo;spec&rdquo; generically represents the species variable. Note that this formula can only contain two variables and must have the length variable on the left-hand-side and the species variable on the right-hand-side.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Not used.</p>
</td></tr>
<tr valign="top"><td><code>spec</code></td>
<td>
<p>A character or factor vector that contains the species names. Ignored if <code>len</code> is a formula.</p>
</td></tr>
<tr valign="top"><td><code>units</code></td>
<td>
<p>A string that indicates the type of units used for the lengths. Choices are <code>mm</code> for millimeters (DEFAULT), <code>cm</code> for centimeters, and <code>in</code> for inches.</p>
</td></tr>
<tr valign="top"><td><code>use.names</code></td>
<td>
<p>A logical that indicates whether the vector returned is numeric (<code>=FALSE</code>) or string (<code>=TRUE</code>; default) representations of the Gabelhouse lengths. See details.</p>
</td></tr>
<tr valign="top"><td><code>addSpec</code></td>
<td>
<p>A character vector of species names for which <code>addLens</code> will be provided.</p>
</td></tr>
<tr valign="top"><td><code>addLens</code></td>
<td>
<p>A numeric vector of lengths that should be used in addition to the Gabelhouse lengths for the species in <code>addSpec</code>. See examples.</p>
</td></tr>
<tr valign="top"><td><code>verbose</code></td>
<td>
<p>A logical that indicates whether detailed messages about species without Gabelhouse lengths or with no recorded values should be printed or not.</p>
</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p>A data.frame that minimally contains the length measurements and species names if <code>len</code> is a formula.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This computes a vector that contains the Gabelhouse lengths specific to each species for all individuals in an entire data frame. The vector can be appended to an existing data.frame to create a variable that contains the Gabelhouse lengths for each individual. The Gabelhouse length value will be <code>NA</code> for each individual for which a Gabelhouse length definitions do not exist in <code><a href="PSDlit.html">PSDlit</a></code>. Species names in the data.frame must be the same as those used in <code><a href="PSDlit.html">PSDlit</a></code>. See the examples for one method for changing species names to something that this function will recognize.
</p>
<p>Individuals shorter than &ldquo;stock&rdquo; length will be listed as <code>substock</code> if <code>use.names=TRUE</code> or <code>0</code> if <code>use.names=FALSE</code>.
</p>
<p>Additional lengths to be used for a species may be included by giving a vector of species names in <code>addSpec</code> and a corresponding vector of additional lengths in <code>addLens</code>. Note, however, that <code>use.names</code> will be reset to <code>FALSE</code> if <code>addSpec</code> and <code>addLens</code> are specified, as there is no way to order the names for all species when additional lengths are used.
</p>


<h3>Value</h3>

<p>A numeric or factor vector that contains the Gabelhouse length categories.
</p>


<h3>IFAR Chapter</h3>

<p>6-Size Structure.
</p>


<h3>Author(s)</h3>

<p>Derek H. Ogle, <a href="mailto:derek@derekogle.com">derek@derekogle.com</a>
</p>


<h3>References</h3>

<p>Ogle, D.H. 2016. <a href="http://derekogle.com/IFAR">Introductory Fisheries Analyses with R</a>. Chapman &amp; Hall/CRC, Boca Raton, FL.
</p>
<p>Guy, C.S., R.M. Neumann, and D.W. Willis. 2006. New terminology for proportional stock density (PSD) and relative stock density (RSD): proportional size structure (PSS). Fisheries 31:86-87.   [Was (is?) from http://pubstorage.sdstate.edu/wfs/415-F.pdf.]
</p>
<p>Guy, C.S., R.M. Neumann, D.W. Willis, and R.O. Anderson. 2006. Proportional size distribution (PSD): A further refinement of population size structure index terminology. Fisheries 32:348. [Was (is?) from http://pubstorage.sdstate.edu/wfs/450-F.pdf.]
</p>
<p>Willis, D.W., B.R. Murphy, and C.S. Guy. 1993. Stock density indices: development, use, and limitations. Reviews in Fisheries Science 1:203-222. [Was (is?) from http://web1.cnre.vt.edu/murphybr/web/Readings/Willis%20et%20al.pdf.]
</p>


<h3>See Also</h3>

<p><code><a href="psdVal.html">psdVal</a></code>, <code><a href="psdCalc.html">psdCalc</a></code>, <code><a href="psdPlot.html">psdPlot</a></code>, <code><a href="PSDlit.html">PSDlit</a></code>, and <code><a href="wrAdd.html">wrAdd</a></code> for related functions. See <code><a href="mapvalues.html">mapvalues</a></code> for help in changing species names to match those in <code><a href="PSDlit.html">PSDlit</a></code>.
</p>


<h3>Examples</h3>

<pre>
## Create random data for three species
# only for repeatability
set.seed(345234534)
dbg &lt;- data.frame(species=factor(rep(c("Bluegill"),30)),tl=round(rnorm(30,130,50),0))
dbg$wt &lt;- round(4.23e-06*dbg$tl^3.316+rnorm(30,0,10),1)
dlb &lt;- data.frame(species=factor(rep(c("Largemouth Bass"),30)),tl=round(rnorm(30,350,60),0))
dlb$wt &lt;- round(2.96e-06*dlb$tl^3.273+rnorm(30,0,60),1)
dbt &lt;- data.frame(species=factor(rep(c("Bluefin Tuna"),30)),tl=round(rnorm(30,1900,300),0))
dbt$wt &lt;- round(4.5e-05*dbt$tl^2.8+rnorm(30,0,6000),1)
df &lt;- rbind(dbg,dlb,dbt)
str(df)

## Examples (non-dplyr)
# Add variable using category names -- formula notation
df$PSD &lt;- psdAdd(tl~species,data=df)
head(df)
# Add variable using category names -- non-formula notation
df$PSD1 &lt;- psdAdd(df$tl,df$species)
head(df)
# Add variable using length values as names
df$PSD2 &lt;- psdAdd(tl~species,data=df,use.names=FALSE)
head(df)
# Add additional length and name for Bluegill
df$PSD3 &lt;- psdAdd(tl~species,data=df,addSpec="Bluegill",addLens=175)
head(df)
# Add additional lengths and names for Bluegill and Largemouth Bass from a data.frame
addls &lt;- data.frame(species=c("Bluegill","Largemouth Bass","Largemouth Bass"),
                    lens=c(175,254,356))
df$psd4 &lt;- psdAdd(tl~species,data=df,addSpec=addls$species,addLens=addls$lens)
head(df)

## All of the above but using dplyr
if (require(dplyr)) {
  df &lt;- df %&gt;%
    mutate(PSD1A=psdAdd(tl,species)) %&gt;%
    mutate(PSD2A=psdAdd(tl,species,use.names=FALSE)) %&gt;%
    mutate(psd3a=psdAdd(tl,species,addSpec="Bluegill",addLens=175)) %&gt;%
    mutate(psd4a=psdAdd(tl,species,addSpec=addls$species,addLens=addls$lens))
}
df

</pre>

<hr /><div style="text-align: center;">[Package <em>FSA</em> version 0.8.25 <a href="00Index.html">Index</a>]</div>
</body></html>
