<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Create a model of a data set and compute predictions.</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for compute_model_prediction {ggvis}"><tr><td>compute_model_prediction {ggvis}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Create a model of a data set and compute predictions.</h2>

<h3>Description</h3>

<p>Fit a 1d model, then compute predictions and (optionally) standard errors
over an evenly spaced grid.
</p>


<h3>Usage</h3>

<pre>
compute_model_prediction(x, formula, ..., model = NULL, se = FALSE,
  level = 0.95, n = 80L, domain = NULL, method)

compute_smooth(x, formula, ..., span = 0.75, se = FALSE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>Dataset-like object to model and predict. Built-in methods for data
frames, grouped data frames and ggvis visualisations.</p>
</td></tr>
<tr valign="top"><td><code>formula</code></td>
<td>
<p>Formula passed to modelling function. Can use any variables
from data.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>arguments passed on to <code>model</code> function</p>
</td></tr>
<tr valign="top"><td><code>model</code></td>
<td>
<p>Model fitting function to use - it must support R's standard
modelling interface, taking a formula and data frame as input, and
returning predictions with <code><a href="../../stats/html/predict.html">predict</a></code>. If not supplied, will use
<code><a href="../../stats/html/loess.html">loess</a></code> for &lt;= 1000 points, otherwise it will use
<code><a href="../../mgcv/html/gam.html">gam</a></code>. Other modelling functions that will work include
<code><a href="../../stats/html/lm.html">lm</a></code>, <code><a href="../../stats/html/glm.html">glm</a></code> and <code><a href="../../MASS/html/rlm.html">rlm</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>se</code></td>
<td>
<p>include standard errors in output? Requires appropriate method of
<code>predict_grid</code>, since the interface for returning predictions with
standard errors is not consistent acrossing modelling frameworks.</p>
</td></tr>
<tr valign="top"><td><code>level</code></td>
<td>
<p>the confidence level of the standard errors.</p>
</td></tr>
<tr valign="top"><td><code>n</code></td>
<td>
<p>the number of grid points to use in the prediction</p>
</td></tr>
<tr valign="top"><td><code>domain</code></td>
<td>
<p>If <code>NULL</code> (the default), the domain of the predicted
values will be the same as the domain of the prediction variable in the
data. It can also be a two-element numeric vector specifying the min and
max.</p>
</td></tr>
<tr valign="top"><td><code>method</code></td>
<td>
<p>Deprecated. Please use <code>model</code> instead.</p>
</td></tr>
<tr valign="top"><td><code>span</code></td>
<td>
<p>Smoothing span used for loess model.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>compute_model_prediction</code> fits a model to the data and makes
predictions with it. <code>compute_smooth</code> is a special case of model
predictions where the model is a smooth loess curve whose smoothness is
controlled by the <code>span</code> parameter.
</p>


<h3>Value</h3>

<p>A data frame with columns: </p>
<table summary="R valueblock">
<tr valign="top"><td><code><code>resp_</code></code></td>
<td>
<p>regularly spaced grid
of <code>n</code> locations</p>
</td></tr> <tr valign="top"><td><code><code>pred_</code></code></td>
<td>
<p>predicted value from model</p>
</td></tr>
<tr valign="top"><td><code><code>pred_lwr_</code> and <code>pred_upr_</code></code></td>
<td>
<p>upper and lower bounds of
confidence interval (if <code>se = TRUE</code>)</p>
</td></tr> <tr valign="top"><td><code><code>pred_se_</code></code></td>
<td>
<p>the
standard error (width of the confidence interval) (if <code>se = TRUE</code>)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre>
# Use a small value of n for these examples
mtcars %&gt;% compute_model_prediction(mpg ~ wt, n = 10)
mtcars %&gt;% compute_model_prediction(mpg ~ wt, n = 10, se = TRUE)
mtcars %&gt;% group_by(cyl) %&gt;% compute_model_prediction(mpg ~ wt, n = 10)

# compute_smooth defaults to loess
mtcars %&gt;% compute_smooth(mpg ~ wt)

# Override model to suppress message or change approach
mtcars %&gt;% compute_model_prediction(mpg ~ wt, n = 10, model = "loess")
mtcars %&gt;% compute_model_prediction(mpg ~ wt, n = 10, model = "lm")

# Set the domain manually
mtcars %&gt;%
  compute_model_prediction(mpg ~ wt, n = 20, model = "lm", domain = c(0, 8))

# Plot the results
mtcars %&gt;% compute_model_prediction(mpg ~ wt) %&gt;%
  ggvis(~pred_, ~resp_) %&gt;%
  layer_paths()
mtcars %&gt;% ggvis() %&gt;%
  compute_model_prediction(mpg ~ wt) %&gt;%
  layer_paths(~pred_, ~resp_)
</pre>

<hr /><div style="text-align: center;">[Package <em>ggvis</em> version 0.4.5 <a href="00Index.html">Index</a>]</div>
</body></html>
