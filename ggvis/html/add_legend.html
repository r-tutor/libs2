<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Add a vega legend specification to a ggvis plot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for add_legend {ggvis}"><tr><td>add_legend {ggvis}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Add a vega legend specification to a ggvis plot</h2>

<h3>Description</h3>

<p>Axis specifications allow you to either override the default legends,
or supply additional legends.
</p>


<h3>Usage</h3>

<pre>
add_legend(vis, scales = NULL, orient = "right", title = NULL,
  format = NULL, values = NULL, properties = NULL)

hide_legend(vis, scales)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>vis</code></td>
<td>
<p>A ggvis object.</p>
</td></tr>
<tr valign="top"><td><code>scales</code></td>
<td>
<p>The name of one or more scales for which to add a legend.
Typically one of &quot;size&quot;, &quot;shape&quot;, &quot;fill&quot;, &quot;stroke&quot;, although custom scale
names may also be used. Multiple names can also be used, like
<code>c("fill", "shape")</code>.</p>
</td></tr>
<tr valign="top"><td><code>orient</code></td>
<td>
<p>The orientation of the legend. One of &quot;left&quot; or &quot;right&quot;. This
determines how the legend is positioned within the scene. The default is
&quot;right&quot;.</p>
</td></tr>
<tr valign="top"><td><code>title</code></td>
<td>
<p>A title for the legend. By default, it uses the name the fields
used in the legend. Use <code>""</code> to suppress the title.</p>
</td></tr>
<tr valign="top"><td><code>format</code></td>
<td>
<p>The formatting pattern for axis labels. Vega uses D3's format
pattern: <a href="https://github.com/mbostock/d3/wiki/Formatting">https://github.com/mbostock/d3/wiki/Formatting</a></p>
</td></tr>
<tr valign="top"><td><code>values</code></td>
<td>
<p>Explicitly set the visible legend values.</p>
</td></tr>
<tr valign="top"><td><code>properties</code></td>
<td>
<p>Optional mark property definitions for custom legend
styling. Should be an object created by <code><a href="legend_props.html">legend_props</a></code>, with
properties for title, label, symbols, gradient, legend.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>More information about axes can be found in the &quot;axes and legends&quot; vignettes.
</p>


<h3>Compared to ggplot2</h3>

<p>In ggplot2, legend (and axis) properties are part of the scales
specification. In vega, they are separate, which allows the specification
of multiple legends, and more flexible linkage between scales and legends.
</p>


<h3>Examples</h3>

<pre>
mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~cyl) %&gt;%
  layer_points() %&gt;%
  add_legend("fill", title = "Cylinders")

# Suppress legend with hide_legend
mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~cyl) %&gt;%
  layer_points() %&gt;%
  hide_legend("fill")

# Combining two properties in one legend
mtcars %&gt;%
  ggvis(x = ~wt, y = ~mpg, fill = ~factor(cyl), shape = ~factor(cyl)) %&gt;%
  layer_points() %&gt;%
  add_legend(c("fill", "shape"))

# Control legend properties with a continuous legend, with x and y position
# in pixels.
mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~cyl) %&gt;%
  layer_points() %&gt;%
  add_legend("fill", title = "Cylinders",
    properties = legend_props(
      title = list(fontSize = 16),
      labels = list(fontSize = 12, fill = "#00F"),
      gradient = list(stroke = "red", strokeWidth = 2),
      legend = list(x = 500, y = 50)
    )
  )

# Control legend properties with a categorical legend, with x and y position
# in the scaled data space.
mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~factor(cyl)) %&gt;%
  layer_points() %&gt;%
  add_legend("fill", title = "Cylinders",
    properties = legend_props(
      title = list(fontSize = 16),
      labels = list(fontSize = 14, dx = 5),
      symbol = list(stroke = "black", strokeWidth = 2,
        shape = "square", size = 200),
      legend = list(
        x = scaled_value("x", 4.5),
        y = scaled_value("y", 30)
      )
    )
  )

# Control legend position using x_rel and y_rel which specify relative
# position, going from 0 to 1. (0, 0) is the bottom-left corner, and
# (1, 1) is the upper-right corner. The values control the position of
# the upper-left corner of the legend.
mtcars %&gt;% ggvis(x = ~wt, y = ~mpg, fill = ~cyl) %&gt;%
  layer_points() %&gt;%
  add_relative_scales() %&gt;%
  add_legend("fill", title = "Cylinders",
    properties = legend_props(
      legend = list(
        x = scaled_value("x_rel", 0.8),
        y = scaled_value("y_rel", 1)
      )
    )
  )
</pre>

<hr /><div style="text-align: center;">[Package <em>ggvis</em> version 0.4.5 <a href="00Index.html">Index</a>]</div>
</body></html>
