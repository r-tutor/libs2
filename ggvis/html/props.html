<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Manage a list of properties.</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for props {ggvis}"><tr><td>props {ggvis}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Manage a list of properties.</h2>

<h3>Description</h3>

<p><code>props()</code> provides a tool for concise creation of <code>prop</code> objects
using a set of conventions designed to capture the most common use cases.
If you need something less common, you'll need to use <code><a href="prop.html">prop</a></code> to
access all possible options.
</p>


<h3>Usage</h3>

<pre>
props(..., .props = NULL, inherit = TRUE, env = parent.frame())

is.ggvis_props(x)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>...</code></td>
<td>
<p>A set of name-value pairs. The name should be a valid vega
property.
</p>
<p>The first two unnamed components are taken to be <code>x</code> and <code>y</code>.
Any additional unnamed components will raise an error.</p>
</td></tr>
<tr valign="top"><td><code>.props</code></td>
<td>
<p>When calling <code>props</code> from other functions, you'll
often have a list of quoted function functions. You can pass that function
to the <code>.props</code> argument instead of messing around with
substitute. In other words, <code>.props</code> lets you opt out of the
non-standard evaluation that <code>props</code> does.</p>
</td></tr>
<tr valign="top"><td><code>inherit</code></td>
<td>
<p>If <code>TRUE</code>, the defaults, will inherit from properties
from the parent layer If <code>FALSE</code>, it will start from nothing.</p>
</td></tr>
<tr valign="top"><td><code>env</code></td>
<td>
<p>The environment in which to evaluate variable properties.</p>
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>
<p>an object to test for props-ness.</p>
</td></tr>
</table>


<h3>Heuristics</h3>

<p>If the values are not already objects of class <code>prop</code>, <code>props</code>
uses the following heuristics to when creating the prop:
</p>

<ul>
<li><p> atomic vectors, e.g. <code>x = 1</code>: scaled = FALSE
</p>
</li>
<li><p> an interative input, e.g. <code>x = input_slider</code>:
scaled = FALSE
</p>
</li>
<li><p> a formula containing a single value, e.g. <code>x ~ 1</code>:
scaled = TRUE
</p>
</li>
<li><p> a formula containing a name or expression, <code>x ~ mpg</code>:
scaled = TRUE
</p>
</li></ul>



<h3>Non-standard evaluation</h3>

<p><code>props</code> uses non-standard evaluation in a slightly unusual way:
if you provide a formula input, the LHS of the formula will provide the
name of the component. In otherwise, <code>props(x = y ~ 1)</code> is the
same as <code>props(y ~ 1)</code>.
</p>
<p>You can combine variables from the dataset and variables defined in the
local environment: expressions will be evaluated in the environment which
the formula was defined.
</p>
<p>If you have the name of a variable in a string, see the
props vignette for how to create the needed property mapping.
</p>


<h3>Enter, exit, hover, and update events</h3>

<p>There are four different property events that the marks
can use. These can, for example, be used to change the appearance of a mark
when the mouse cursor is hovering over it: when the mark is hovered over, it
uses the hover event, and when the mark isn't hovered over, it uses the
update event
</p>

<ul>
<li><p> enter: This event is used by marks when they are added to a plot.
</p>
</li>
<li><p> update: This event is used by marks after they have entered, and
also after they have been hovered over.
</p>
</li>
<li><p> exit: This event is used by marks as they are removed from a plot.
</p>
</li>
<li><p> hover: This event is used when the mouse cursor is over the mark.
</p>
</li></ul>

<p>You can specify the event for a property, by putting a period and the
event after the property name. For example,
<code>props(fill.update := "black", fill.hover := "red")</code> will make a mark
have a black fill normally, and red fill when it is hovered over.
</p>
<p>The default event is update, so if you run <code>props(fill := "red")</code>,
this is equivalent to <code>props(fill.update := "red")</code>.
</p>
<p>In practice, the enter and exit events are useful only when the update has
a duration (and is therefore not instantaneous). The update event can be
thought of as the &quot;default&quot; state.
</p>


<h3>Key property</h3>

<p>In addition to the standard properties, there is a special optional property
called <code>key</code>. This is useful for plots with dynamic data and smooth
transitions: as the data changes, the key is used to tell the plot how the
new data rows should be matched to the old data rows. Note that the key must
be an unscaled value. Additionally, the key property doesn't have a event,
since it is independent of enter, update, exit, and hover events.
</p>


<h3>Properties</h3>

<p>You can set the following mark properties:
</p>

<ul>
<li><p>  x  The first (typically left-most) x-coordinate.
</p>
</li>
<li><p>  x2 The second (typically right-most) x-coordinate.
</p>
</li>
<li><p>  width The width of the mark (if supported).
</p>
</li>
<li><p>  y The first (typically top-most) y-coordinate.
</p>
</li>
<li><p>  y2 The second (typically bottom-most) y-coordinate.
</p>
</li>
<li><p>  height The height of the mark (if supported).
</p>
</li>
<li><p>  opacity The overall opacity.
</p>
</li>
<li><p>  fill The fill color.
</p>
</li>
<li><p>  fillOpacity The fill opacity
</p>
</li>
<li><p>  stroke The stroke color.
</p>
</li>
<li><p>  strokeWidth The stroke width, in pixels.
</p>
</li>
<li><p>  strokeOpacity The stroke opacity.
</p>
</li>
<li><p>  size [symbol] The pixel area of the symbol. For example in the case
of circles, the radius is determined in part by the square root of the size
value.
</p>
</li>
<li><p>  shape [symbol] The symbol shape to use. One of circle (default),
square, cross, diamond, triangle-up, or triangle-down (symbol only)
</p>
</li>
<li><p>  innerRadius [arc] The inner radius of the arc, in pixels.
</p>
</li>
<li><p>  outerRadius [arc] The outer radius of the arc, in pixels.
</p>
</li>
<li><p>  startAngle [arc] The start angle of the arc, in radians.
</p>
</li>
<li><p>  endAngle [arc] The end angle of the arc, in radians.
</p>
</li>
<li><p>  interpolate [area, line] The line interpolation method to use. One
of linear, step-before, step-after, basis, basis-open, cardinal,
cardinal-open, monotone.
</p>
</li>
<li><p>  tension [area, line] Depending on the interpolation type, sets the
tension parameter.
</p>
</li>
<li><p>  url [image] The URL from which to retrieve the image.
</p>
</li>
<li><p>  align [image, text] The horizontal alignment of the object. One of
left, right, center.
</p>
</li>
<li><p>  baseline [image, text] The vertical alignment of the object. One of
top, middle, bottom.
</p>
</li>
<li><p>  text [text] The text to display.
</p>
</li>
<li><p>  dx [text] The horizontal margin, in pixels, between the text label
and its anchor point. The value is ignored if the align property is center.
</p>
</li>
<li><p>  dy [text] The vertical margin, in pixels, between the text label
and its anchor point. The value is ignored if the baseline property is
middle.
</p>
</li>
<li><p>  angle [text] The rotation angle of the text, in degrees.
</p>
</li>
<li><p>  font [text] The typeface to set the text in (e.g., Helvetica Neue).
</p>
</li>
<li><p>  fontSize [text] The font size, in pixels.
</p>
</li>
<li><p>  fontWeight [text] The font weight (e.g., bold).
</p>
</li>
<li><p>  fontStyle [text] The font style (e.g., italic).
</p>
</li></ul>

<p>To each property, you can assign any property object (<code><a href="prop.html">prop</a></code>)
either locally (i.e. in the mark), or in a parent <code>layer</code>.
</p>


<h3>Examples</h3>

<pre>
# Set to constant values
props(x := 1, y := 2)
# Map to variables in the dataset
props(x = ~mpg, y = ~cyl)
# Set to a constant value in the data space
props(x = 1, y = 1)
# Use an interactive slider
props(opacity := input_slider(0, 1))

# To control other settings (like custom scales, mult and offset)
# use a prop object
props(prop("x", "old", scale = "x", offset = -1))

# Red when hovered over, black otherwise (these are equivalent)
props(fill := "black", fill.hover := "red")
props(fill.update := "black", fill.hover := "red")

# Use a column called id as the key (for dynamic data)
props(key := ~id)

# Explicitly create prop objects. The following are equivalent:
props(fill = ~cyl)
props(fill.update = ~cyl)
props(prop("fill", ~cyl))
props(prop("fill", ~cyl, scale = "fill", event = "update"))

# Prop objects can be programmatically created and added:
property &lt;- "fill"
expr &lt;- parse(text = "wt/mpg")[[1]]
p &lt;- prop(property, expr)
props(p)

# Using .props
props(.props = list(x = 1, y = 2))
props(.props = list(x = ~mpg, y = ~cyl))
props(.props = list(quote(x := ~mpg)))
</pre>

<hr /><div style="text-align: center;">[Package <em>ggvis</em> version 0.4.5 <a href="00Index.html">Index</a>]</div>
</body></html>
