<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Tidiers for poLCA objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for poLCA_tidiers {broom}"><tr><td>poLCA_tidiers {broom}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Tidiers for poLCA objects</h2>

<h3>Description</h3>

<p>Tidiers for poLCA latent class regression models. Summarize the
probabilities of each outcome for each variable within each class
with <code>tidy</code>, add predictions to the data with <code>augment</code>,
or find the log-likelihood/AIC/BIC with <code>glance</code>.
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'poLCA'
tidy(x, ...)

## S3 method for class 'poLCA'
augment(x, data, ...)

## S3 method for class 'poLCA'
glance(x, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>A poLCA object</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Extra arguments, not used</p>
</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p>For <code>augment</code>, the original dataset used to fit
the latent class model. If not given, uses manifest variables in
<code>x$y</code> and, if applicable, covariates in <code>x$x</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>All tidying methods return a data.frame without rownames, whose
structure depends on the method chosen.
</p>
<p><code>tidy</code> returns a data frame with one row per
variable-class-outcome combination, with columns:
</p>

<dl>
<dt>variable</dt><dd><p>Manifest variable</p>
</dd>
<dt>class</dt><dd><p>Latent class ID, an integer</p>
</dd>
<dt>outcome</dt><dd><p>Outcome of manifest variable</p>
</dd>
<dt>estimate</dt><dd><p>Estimated class-conditional response probability</p>
</dd>
<dt>std.error</dt><dd><p>Standard error of estimated probability</p>
</dd>
</dl>

<p><code>augment</code> returns a data frame with one row
for each original observation, augmented with the following
columns:
</p>

<dl>
<dt>.class</dt><dd><p>Predicted class, using modal assignment</p>
</dd>
<dt>.probability</dt><dd><p>Posterior probability of predicted class</p>
</dd>
</dl>

<p>If the <code>data</code> argument is given, those columns are included in the output
(only rows for which predictions could be made).
Otherwise, the <code>y</code> element of the poLCA object, which contains the
manifest variables used to fit the model, are used, along with any covariates,
if present, in <code>x</code>.
</p>
<p>Note that while the probability of all the classes (not just the predicted
modal class) can be found in the <code>posterior</code> element, these are not
included in the augmented output, since it would result in potentially
many additional columns, which augment tends to avoid.
</p>
<p><code>glance</code> returns a one-row data frame with the
following columns:
</p>

<dl>
<dt>logLik</dt><dd><p>the data's log-likelihood under the model</p>
</dd>
<dt>AIC</dt><dd><p>the Akaike Information Criterion</p>
</dd>
<dt>BIC</dt><dd><p>the Bayesian Information Criterion</p>
</dd>
<dt>g.squared</dt><dd><p>The likelihood ratio/deviance statistic</p>
</dd>
<dt>chi.squared</dt><dd><p>The Pearson Chi-Square goodness of fit statistic
for multiway tables</p>
</dd>
<dt>df</dt><dd><p>Number of parameters estimated, and therefore degrees of
freedom used</p>
</dd>
<dt>df.residual</dt><dd><p>Number of residual degrees of freedom left</p>
</dd>
</dl>



<h3>Examples</h3>

<pre>

if (require("poLCA", quietly = TRUE)) {
  library(poLCA)
  library(dplyr)
  
  data(values)
  f &lt;- cbind(A, B, C, D)~1
  M1 &lt;- poLCA(f, values, nclass = 2, verbose = FALSE)
  
  M1
  tidy(M1)
  head(augment(M1))
  glance(M1)
  
  library(ggplot2)
  
  ggplot(tidy(M1), aes(factor(class), estimate, fill = factor(outcome))) +
    geom_bar(stat = "identity", width = 1) +
    facet_wrap(~ variable)
  
  set.seed(2016)
  # compare multiple
  mods &lt;- data_frame(nclass = 1:3) %&gt;%
    group_by(nclass) %&gt;%
    do(mod = poLCA(f, values, nclass = .$nclass, verbose = FALSE))
  
  # compare log-likelihood and/or AIC, BIC
  mods %&gt;%
    glance(mod)
  
  ## Three-class model with a single covariate.
  
  data(election)
  f2a &lt;- cbind(MORALG,CARESG,KNOWG,LEADG,DISHONG,INTELG,
               MORALB,CARESB,KNOWB,LEADB,DISHONB,INTELB)~PARTY
  nes2a &lt;- poLCA(f2a, election, nclass = 3, nrep = 5, verbose = FALSE)
  
  td &lt;- tidy(nes2a)
  head(td)
  
  # show 
  
  ggplot(td, aes(outcome, estimate, color = factor(class), group = class)) +
    geom_line() +
    facet_wrap(~ variable, nrow = 2) +
    theme(axis.text.x = element_text(angle = 90, hjust = 1))
  
  au &lt;- augment(nes2a)
  head(au)
  au %&gt;%
    count(.class)
  
  # if the original data is provided, it leads to NAs in new columns
  # for rows that weren't predicted
  au2 &lt;- augment(nes2a, data = election)
  head(au2)
  dim(au2)
}

</pre>

<hr /><div style="text-align: center;">[Package <em>broom</em> version 0.4.5 <a href="00Index.html">Index</a>]</div>
</body></html>
