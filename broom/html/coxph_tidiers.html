<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Tidiers for coxph object</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for coxph_tidiers {broom}"><tr><td>coxph_tidiers {broom}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Tidiers for coxph object</h2>

<h3>Description</h3>

<p>Tidy the coefficients of a Cox proportional hazards regression model,
construct predictions, or summarize the entire model into a single row.
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'coxph'
tidy(x, exponentiate = FALSE, conf.int = 0.95, ...)

## S3 method for class 'coxph'
augment(x, data = stats::model.frame(x), newdata,
  type.predict = "lp", type.residuals = "martingale", ...)

## S3 method for class 'coxph'
glance(x, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>&quot;coxph&quot; object</p>
</td></tr>
<tr valign="top"><td><code>exponentiate</code></td>
<td>
<p>whether to report the estimate and confidence intervals
on an exponential scale</p>
</td></tr>
<tr valign="top"><td><code>conf.int</code></td>
<td>
<p>confidence level to be used for CI</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Extra arguments, not used</p>
</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p>original data for <code>augment</code></p>
</td></tr>
<tr valign="top"><td><code>newdata</code></td>
<td>
<p>new data on which to do predictions</p>
</td></tr>
<tr valign="top"><td><code>type.predict</code></td>
<td>
<p>type of predicted value (see <code><a href="../../survival/html/predict.coxph.html">predict.coxph</a></code>)</p>
</td></tr>
<tr valign="top"><td><code>type.residuals</code></td>
<td>
<p>type of residuals (see <code><a href="../../survival/html/residuals.coxph.html">residuals.coxph</a></code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When the modeling was performed with <code>na.action = "na.omit"</code>
(as is the typical default), rows with NA in the initial data are omitted
entirely from the augmented data frame. When the modeling was performed
with <code>na.action = "na.exclude"</code>, one should provide the original data
as a second argument, at which point the augmented data will contain those
rows (typically with NAs in place of the new columns). If the original data
is not provided to <code>augment</code> and <code>na.action = "na.exclude"</code>, a
warning is raised and the incomplete rows are dropped.
</p>


<h3>Value</h3>

<p><code>tidy</code> returns a data.frame with one row for each term,
with columns
</p>
<table summary="R valueblock">
<tr valign="top"><td><code>estimate</code></td>
<td>
<p>estimate of slope</p>
</td></tr>
<tr valign="top"><td><code>std.error</code></td>
<td>
<p>standard error of estimate</p>
</td></tr>
<tr valign="top"><td><code>statistic</code></td>
<td>
<p>test statistic</p>
</td></tr>
<tr valign="top"><td><code>p.value</code></td>
<td>
<p>p-value</p>
</td></tr>
</table>
<p><code>augment</code> returns the original data.frame with additional
columns added:
</p>
<table summary="R valueblock">
<tr valign="top"><td><code>.fitted</code></td>
<td>
<p>predicted values</p>
</td></tr>
<tr valign="top"><td><code>.se.fit</code></td>
<td>
<p>standard errors </p>
</td></tr>
<tr valign="top"><td><code>.resid</code></td>
<td>
<p>residuals (not present if <code>newdata</code> is provided)</p>
</td></tr>
</table>
<p><code>glance</code> returns a one-row data.frame with statistics
calculated on the cox regression.
</p>


<h3>See Also</h3>

<p><a href="../../stats/html/na.action.html">na.action</a>
</p>


<h3>Examples</h3>

<pre>

if (require("survival", quietly = TRUE)) {
    cfit &lt;- coxph(Surv(time, status) ~ age + sex, lung)

    tidy(cfit)
    tidy(cfit, exponentiate = TRUE)

    lp &lt;- augment(cfit, lung)
    risks &lt;- augment(cfit, lung, type.predict = "risk")
    expected &lt;- augment(cfit, lung, type.predict = "expected")

    glance(cfit)
    
    # also works on clogit models
    resp &lt;- levels(logan$occupation)
    n &lt;- nrow(logan)
    indx &lt;- rep(1:n, length(resp))
    logan2 &lt;- data.frame(logan[indx,],
                         id = indx,
                         tocc = factor(rep(resp, each=n)))
    logan2$case &lt;- (logan2$occupation == logan2$tocc)

    cl &lt;- clogit(case ~ tocc + tocc:education + strata(id), logan2)
    tidy(cl)
    glance(cl)
    
    library(ggplot2)
    ggplot(lp, aes(age, .fitted, color = sex)) + geom_point()
    ggplot(risks, aes(age, .fitted, color = sex)) + geom_point()
    ggplot(expected, aes(time, .fitted, color = sex)) + geom_point()
}
</pre>

<hr /><div style="text-align: center;">[Package <em>broom</em> version 0.4.5 <a href="00Index.html">Index</a>]</div>
</body></html>
