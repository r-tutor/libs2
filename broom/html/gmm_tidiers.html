<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Tidying methods for generalized method of moments &quot;gmm&quot;...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for gmm_tidiers {broom}"><tr><td>gmm_tidiers {broom}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Tidying methods for generalized method of moments &quot;gmm&quot; objects</h2>

<h3>Description</h3>

<p>These methods tidy the coefficients of &quot;gmm&quot; objects from the gmm package,
or glance at the model-wide statistics (especially the J-test).
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'gmm'
tidy(x, conf.int = FALSE, conf.level = 0.95,
  exponentiate = FALSE, quick = FALSE, ...)

## S3 method for class 'gmm'
glance(x, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>gmm object</p>
</td></tr>
<tr valign="top"><td><code>conf.int</code></td>
<td>
<p>whether to include a confidence interval</p>
</td></tr>
<tr valign="top"><td><code>conf.level</code></td>
<td>
<p>confidence level of the interval, used only if
<code>conf.int=TRUE</code></p>
</td></tr>
<tr valign="top"><td><code>exponentiate</code></td>
<td>
<p>whether to exponentiate the coefficient estimates
and confidence intervals (typical for logistic regression)</p>
</td></tr>
<tr valign="top"><td><code>quick</code></td>
<td>
<p>whether to compute a smaller and faster version, containing
only the <code>term</code> and <code>estimate</code> columns (and confidence interval
if requested, which may be slower)</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>extra arguments (not used)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>conf.int=TRUE</code>, the confidence interval is computed with
the <code><a href="../../stats/html/confint.html">confint</a></code> function.
</p>
<p>Note that though the &quot;gmm&quot; object contains residuals and fitted values,
there is not yet an <code>augment</code> method implemented. This is because
the input to gmm is not tidy (it's a &quot;wide&quot; matrix), so it is not immediately
clear what the augmented results should look like.
</p>


<h3>Value</h3>

<p>All tidying methods return a <code>data.frame</code> without rownames.
The structure depends on the method chosen.
</p>
<p><code>tidy.gmm</code> returns one row for each coefficient, with six columns:
</p>
<table summary="R valueblock">
<tr valign="top"><td><code>term</code></td>
<td>
<p>The term in the model being estimated</p>
</td></tr>
<tr valign="top"><td><code>estimate</code></td>
<td>
<p>The estimated coefficient</p>
</td></tr>
<tr valign="top"><td><code>std.error</code></td>
<td>
<p>The standard error from the linear model</p>
</td></tr>
<tr valign="top"><td><code>statistic</code></td>
<td>
<p>t-statistic</p>
</td></tr>
<tr valign="top"><td><code>p.value</code></td>
<td>
<p>two-sided p-value</p>
</td></tr>
</table>
<p>If all the the terms have _ in them (e.g. <code>WMK_(Intercept)</code>),
they are split into <code>variable</code> and <code>term</code>.
</p>
<p>If <code>conf.int=TRUE</code>, it also includes columns for <code>conf.low</code> and
<code>conf.high</code>, computed with <code><a href="../../stats/html/confint.html">confint</a></code>.
</p>
<p><code>glance.gmm</code> returns a one-row data.frame with the columns
</p>
<table summary="R valueblock">
<tr valign="top"><td><code>df</code></td>
<td>
<p>Degrees of freedom</p>
</td></tr>
<tr valign="top"><td><code>statistic</code></td>
<td>
<p>Statistic from J-test for E(g)=0</p>
</td></tr>
<tr valign="top"><td><code>p.value</code></td>
<td>
<p>P-value from J-test</p>
</td></tr>
<tr valign="top"><td><code>df.residual</code></td>
<td>
<p>Residual degrees of freedom, if included in &quot;gmm&quot; object</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre>

if (require("gmm", quietly = TRUE)) {
  # examples come from the "gmm" package
  ## CAPM test with GMM
  data(Finance)
  r &lt;- Finance[1:300, 1:10]
  rm &lt;- Finance[1:300, "rm"]
  rf &lt;- Finance[1:300, "rf"]
  
  z &lt;- as.matrix(r-rf)
  t &lt;- nrow(z)
  zm &lt;- rm-rf
  h &lt;- matrix(zm, t, 1)
  res &lt;- gmm(z ~ zm, x = h)
  
  # tidy result
  tidy(res)
  tidy(res, conf.int = TRUE)
  tidy(res, conf.int = TRUE, conf.level = .99)
  
  # coefficient plot
  library(ggplot2)
  library(dplyr)
  tidy(res, conf.int = TRUE) %&gt;%
    mutate(variable = reorder(variable, estimate)) %&gt;%
    ggplot(aes(estimate, variable)) +
    geom_point() +
    geom_errorbarh(aes(xmin = conf.low, xmax = conf.high)) +
    facet_wrap(~ term) +
    geom_vline(xintercept = 0, color = "red", lty = 2)
  
  # from a function instead of a matrix
  g &lt;- function(theta, x) {
  	e &lt;- x[,2:11] - theta[1] - (x[,1] - theta[1]) %*% matrix(theta[2:11], 1, 10)
  	gmat &lt;- cbind(e, e*c(x[,1]))
  	return(gmat) }
  
  x &lt;- as.matrix(cbind(rm, r))
  res_black &lt;- gmm(g, x = x, t0 = rep(0, 11))
  
  tidy(res_black)
  tidy(res_black, conf.int = TRUE)
  
  ## APT test with Fama-French factors and GMM
  
  f1 &lt;- zm
  f2 &lt;- Finance[1:300, "hml"] - rf
  f3 &lt;- Finance[1:300, "smb"] - rf
  h &lt;- cbind(f1, f2, f3)
  res2 &lt;- gmm(z ~ f1 + f2 + f3, x = h)
  
  td2 &lt;- tidy(res2, conf.int = TRUE)
  td2
  
  # coefficient plot
  td2 %&gt;%
    mutate(variable = reorder(variable, estimate)) %&gt;%
    ggplot(aes(estimate, variable)) +
    geom_point() +
    geom_errorbarh(aes(xmin = conf.low, xmax = conf.high)) +
    facet_wrap(~ term) +
    geom_vline(xintercept = 0, color = "red", lty = 2)
}

</pre>

<hr /><div style="text-align: center;">[Package <em>broom</em> version 0.4.5 <a href="00Index.html">Index</a>]</div>
</body></html>
